<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Succession - Quelle est la meilleure mani√®re d'avancer sereinement ?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }

        .container {
            max-width: 800px;
            width: 90%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            margin: 20px 0;
        }

        .progress-bar {
            height: 4px;
            background: #e0e0e0;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .content {
            padding: 40px;
            text-align: center;
        }

        .page {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .emoji {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
            line-height: 1.2;
        }

        h2 {
            font-size: 2rem;
            color: #34495e;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .question-counter {
            background: #667eea;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 25px;
            display: inline-block;
        }

        .question-text {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            text-align: left;
        }

        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(5px);
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.6);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .cta-button {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            text-decoration: none;
            display: inline-block;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
        }

        .final-cta {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            margin-top: 30px;
            padding: 30px;
            border-radius: 15px;
            color: white;
        }

        .privacy-note {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 3px solid #3498db;
        }

        .intro-list {
            text-align: left;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .intro-list ul {
            list-style: none;
            padding-left: 0;
        }

        .intro-list li {
            padding: 8px 0;
            position: relative;
            padding-left: 30px;
        }

        .intro-list li::before {
            content: '‚úÖ';
            position: absolute;
            left: 0;
            top: 8px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        @media (max-width: 768px) {
            .content {
                padding: 25px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .option {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="content">
            <!-- Page d'accueil -->
            <div class="page active" id="intro">
                <span class="emoji">üè†</span>
                <h1>Succession : quelle est la meilleure mani√®re d'avancer sereinement avec votre maison h√©rit√©e ?</h1>
                <p class="subtitle">La perte d'un proche est d√©j√† une √©preuve difficile. Quand un bien immobilier s'ajoute √† la succession, les √©motions et les contraintes administratives peuvent devenir un v√©ritable fardeau.</p>
                
                <div class="intro-list">
                    <p style="font-weight: 500; margin-bottom: 15px;">Ce quiz a pour but de vous offrir un premier √©clairage sur votre situation. En quelques questions simples, vous obtiendrez un bilan adapt√© √† votre contexte :</p>
                    <ul>
                        <li>√™tes-vous pr√™t √† vendre rapidement ?</li>
                        <li>avez-vous besoin de temps ?</li>
                        <li>ou plut√¥t d'un accompagnement pour d√©bloquer une situation familiale ?</li>
                    </ul>
                </div>
                
                <p style="color: #e67e22; font-weight: 500; margin: 20px 0;"><strong>‚ö†Ô∏è R√©pondez en toute sinc√©rit√© : vos r√©ponses resteront confidentielles.</strong></p>
                <button class="btn" id="startBtn">Commencer le quiz (2 minutes)</button>
            </div>

            <!-- Questions du quiz -->
            <div class="page" id="question1">
                <div class="question-counter">Question 1 / 7</div>
                <h2 class="question-text">Quand vous pensez √† ce bien h√©rit√©, quel sentiment domine ?</h2>
                <div class="options">
                    <div class="option" data-value="attachment">üíù Attachement affectif</div>
                    <div class="option" data-value="stress">üò∞ Stress li√© aux d√©marches</div>
                    <div class="option" data-value="relief">üòå Soulagement √† l'id√©e de tourner la page</div>
                </div>
                <button class="btn next-btn" data-current="1" disabled>Question suivante</button>
            </div>

            <div class="page" id="question2">
                <div class="question-counter">Question 2 / 7</div>
                <h2 class="question-text">Combien d'h√©ritiers sont impliqu√©s dans cette succession ?</h2>
                <div class="options">
                    <div class="option" data-value="alone">üë§ Je suis seul(e)</div>
                    <div class="option" data-value="agreement">ü§ù Plusieurs, en plein accord</div>
                    <div class="option" data-value="disagreement">‚öñÔ∏è Plusieurs, avec des avis divergents</div>
                </div>
                <button class="btn next-btn" data-current="2" disabled>Question suivante</button>
            </div>

            <div class="page" id="question3">
                <div class="question-counter">Question 3 / 7</div>
                <h2 class="question-text">Quel est l'√©tat actuel du bien ?</h2>
                <div class="options">
                    <div class="option" data-value="good">‚ú® Pr√™t √† habiter / Tr√®s bon √©tat</div>
                    <div class="option" data-value="refresh">üé® Rafra√Æchissement n√©cessaire</div>
                    <div class="option" data-value="renovate">üõ†Ô∏è Gros travaux √† pr√©voir</div>
                </div>
                <button class="btn next-btn" data-current="3" disabled>Question suivante</button>
            </div>

            <div class="page" id="question4">
                <div class="question-counter">Question 4 / 7</div>
                <h2 class="question-text">Avez-vous d√©j√† discut√© de l'avenir du bien avec les autres h√©ritiers ?</h2>
                <div class="options">
                    <div class="option" data-value="yes_clear">‚úÖ Oui, tout est clair</div>
                    <div class="option" data-value="yes_vague">ü§î Oui, mais c'est encore flou</div>
                    <div class="option" data-value="no">‚ùå Non, pas encore</div>
                    <div class="option" data-value="divergent">‚ö†Ô∏è Oui, et nous ne sommes pas d'accord</div>
                </div>
                <button class="btn next-btn" data-current="4" disabled>Question suivante</button>
            </div>

            <div class="page" id="question5">
                <div class="question-counter">Question 5 / 7</div>
                <h2 class="question-text">Quel est votre horizon de temps souhait√© pour r√©gler la situation ?</h2>
                <div class="options">
                    <div class="option" data-value="quickly">‚ö° Le plus vite possible</div>
                    <div class="option" data-value="months">üìÖ Dans les 6 prochains mois</div>
                    <div class="option" data-value="nohurry">üê¢ Je n'ai aucune urgence</div>
                </div>
                <button class="btn next-btn" data-current="5" disabled>Question suivante</button>
            </div>

            <div class="page" id="question6">
                <div class="question-counter">Question 6 / 7</div>
                <h2 class="question-text">Quel est votre principal obstacle aujourd'hui ?</h2>
                <div class="options">
                    <div class="option" data-value="admin">üìù L'administratif et le notaire</div>
                    <div class="option" data-value="emotional">üíî Le poids √©motionnel / vider la maison</div>
                    <div class="option" data-value="family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Les relations familiales</div>
                    <div class="option" data-value="value">üí∞ L'incertitude sur le prix de vente</div>
                </div>
                <button class="btn next-btn" data-current="6" disabled>Question suivante</button>
            </div>

            <div class="page" id="question7">
                <div class="question-counter">Question 7 / 7</div>
                <h2 class="question-text">Souhaitez-vous un avis professionnel pour y voir plus clair ?</h2>
                <div class="options">
                    <div class="option" data-value="yes">üôã Oui, j'en ai besoin</div>
                    <div class="option" data-value="maybe">üßê Peut-√™tre plus tard</div>
                    <div class="option" data-value="no">üôÖ Non, je g√®re seul(e)</div>
                </div>
                <button class="btn next-btn" data-current="7" disabled>Voir mon bilan</button>
            </div>

            <!-- Page de contact -->
            <div class="page" id="contact">
                <span class="emoji">üìß</span>
                <h2>O√π devons-nous vous envoyer votre bilan ?</h2>
                <p class="subtitle">Compl√©tez ces informations pour recevoir votre analyse personnalis√©e et vos conseils adapt√©s.</p>
                
                <form id="contactForm">
                    <div class="form-group">
                        <label for="fullName">Nom complet *</label>
                        <input type="text" id="fullName" required placeholder="Votre nom et pr√©nom">
                    </div>
                    <div class="form-group">
                        <label for="phone">T√©l√©phone *</label>
                        <input type="tel" id="phone" required placeholder="Votre num√©ro de t√©l√©phone">
                    </div>
                    <div class="form-group">
                        <label for="address">Adresse du bien (optionnel)</label>
                        <input type="text" id="address" placeholder="Pour une estimation plus pr√©cise">
                    </div>
                    
                    <button type="submit" class="btn" id="submitBtn">Recevoir mon bilan personnalis√©</button>
                </form>
                
                <div class="privacy-note">
                    üîí Vos donn√©es sont confidentielles et uniquement utilis√©es pour vous transmettre votre bilan.
                </div>
            </div>

            <!-- Page de r√©sultats -->
            <div class="page" id="results">
                <span class="emoji">üìä</span>
                <h2>Votre bilan personnalis√©</h2>
                <div id="resultContent" style="text-align: left; margin: 30px 0;"></div>
                
                <div class="final-cta">
                    <h3>üéÅ Pour aller plus loin, nous vous offrons :</h3>
                    <ul style="margin-top: 15px; list-style-position: inside;">
                        <li>Un entretien gratuit et confidentiel (30 min) pour parler de votre situation</li>
                        <li>Une estimation claire et sans engagement de la valeur de votre bien</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const BACKEND_URL = 'https://quiz-succession-backend.onrender.com/api/trpc/quiz.submit';
        
        // √âtat du quiz
        let currentQuestion = 0;
        const answers = {};

        const profiles = {
            "Le C≈ìur partag√©": {
                emoji: "üíù",
                description: "Vous √™tes encore tr√®s attach√©(e) au bien h√©rit√©. Ce logement √©voque des souvenirs, une histoire familiale, parfois m√™me une pr√©sence affective forte. Vous ressentez un m√©lange d'amour, de nostalgie, mais aussi de culpabilit√© √† l'id√©e de 'tourner la page'.",
                implications: "Vous n'√™tes pas encore dans une d√©marche de vente imm√©diate. Les d√©cisions peuvent √™tre retard√©es par l'√©motionnel. Vous risquez de laisser le bien se d√©grader ou de supporter des frais inutiles (taxes, entretien).",
                message: "Prenez le temps de la r√©flexion, mais entourez-vous d'informations claires. Un conseiller peut vous aider √† poser les bases sans vous mettre sous pression.",
                cta: "üìä Demandez d√®s maintenant votre estimation gratuite et sans engagement",
                ctaAction: "redirectToCalendar"
            },
            "Le M√©diateur": {
                emoji: "ü§ù",
                description: "Vous √™tes confront√©(e) √† des d√©saccords familiaux. Certains h√©ritiers veulent vendre, d'autres non. Il y a des tensions, des divergences de points de vue. Vous √™tes peut-√™tre au c≈ìur de ces conflits, ou vous cherchez √† trouver un √©quilibre.",
                implications: "Les d√©cisions peuvent √™tre bloqu√©es. Les frais continuent √† s'accumuler. Le bien peut se d√©grader. Les relations familiales peuvent se d√©t√©riorer davantage.",
                message: "Vous avez besoin d'un tiers impartial pour d√©bloquer la situation. Un conseiller sp√©cialis√© en succession peut aider √† trouver des solutions acceptables pour tous.",
                cta: "ü§ù Trouvez des solutions avec l'aide d'un expert",
                ctaAction: "bookConsultation"
            },
            "Le D√©cid√©": {
                emoji: "‚ö°",
                description: "Vous savez ce que vous voulez : vendre rapidement et tourner la page. Vous n'√™tes pas √©motionnellement attach√©(e) au bien et vous voyez la vente comme une solution pratique et financi√®re.",
                implications: "Vous √™tes pr√™t(e) √† agir, mais vous devez vous assurer que tous les h√©ritiers sont d'accord. Il faut respecter les d√©lais l√©gaux et les formalit√©s.",
                message: "Agissez avec m√©thode. Obtenez une estimation professionnelle, pr√©parez les documents, et lancez le processus de vente.",
                cta: "‚ö° Lancez votre processus de vente d√®s maintenant",
                ctaAction: "redirectToCalendar"
            },
            "Le Prudent": {
                emoji: "üïê",
                description: "Vous n'√™tes pas press√©(e). Vous prenez du recul et vous ne voulez pas vous pr√©cipiter. Vous √™tes peut-√™tre en attente de clart√©, ou vous pr√©f√©rez laisser le temps faire son ≈ìuvre.",
                implications: "Vous avez le luxe du temps, mais attention : les frais continuent √† s'accumuler (taxes, entretien, assurance). Un bien inoccup√© peut se d√©grader.",
                message: "Utilisez ce temps pour vous informer, consulter un expert, et pr√©parer votre strat√©gie sans pr√©cipitation.",
                cta: "üïê Planifiez votre succession sereinement",
                ctaAction: "redirectToCalendar"
            }
        };

        // Fonctions utilitaires
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                window.scrollTo(0, 0);
            }
        }

        function updateProgress() {
            const totalQuestions = 7;
            const progress = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function calculateProfile() {
            let profile = "Le C≈ìur partag√©"; // Profil par d√©faut
            
            const hasDisagreement = answers.q2 === 'disagreement' || answers.q4 === 'divergent';
            const isEmotionallyAttached = answers.q1 === 'attachment' || answers.q6 === 'emotional';
            const wantsQuickSale = answers.q5 === 'quickly' && answers.q1 === 'relief';
            const noUrgency = answers.q5 === 'nohurry';
            
            if (hasDisagreement) {
                profile = "Le M√©diateur";
            } else if (wantsQuickSale && !isEmotionallyAttached) {
                profile = "Le D√©cid√©";
            } else if (noUrgency && !isEmotionallyAttached) {
                profile = "Le Prudent";
            } else if (isEmotionallyAttached) {
                profile = "Le C≈ìur partag√©";
            }
            
            return profile;
        }

        function displayResults(profileName) {
            const profileData = profiles[profileName];
            const resultContent = document.getElementById('resultContent');
            
            resultContent.innerHTML = `
                <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; border-left: 5px solid #667eea;">
                    <h3 style="font-size: 1.8rem; margin-bottom: 15px;">${profileData.emoji} ${profileName}</h3>
                    <div style="margin-bottom: 20px; line-height: 1.8;">
                        ${profileData.description}
                    </div>
                    <div style="margin-bottom: 20px;">
                        <strong>Ce que cela implique :</strong>
                        <div style="margin-top: 10px; padding: 15px; background: white; border-radius: 10px;">
                            ${profileData.implications}
                        </div>
                    </div>
                    <div style="margin-bottom: 20px; padding: 15px; background: #eef2ff; border-radius: 10px; color: #4338ca;">
                        <strong>Conseil adapt√© :</strong> üëâ ${profileData.message}
                    </div>
                    <button class="cta-button" id="finalCtaBtn" style="margin-top: 15px; width: 100%;">
                        ${profileData.cta}
                    </button>
                </div>
            `;

            // Attacher l'√©v√©nement au bouton CTA g√©n√©r√© dynamiquement
            document.getElementById('finalCtaBtn').addEventListener('click', () => {
                if (profileData.ctaAction === 'redirectToCalendar') redirectToCalendar();
                else if (profileData.ctaAction === 'bookConsultation') bookConsultation();
            });
        }

        // Actions
        function redirectToCalendar() {
            window.location.href = 'https://cal.com/lucie-garnier-immobilier/rendez-vous-succession-quiz';
        }

        function bookConsultation() {
            window.location.href = 'https://cal.com/lucie-garnier-immobilier/rendez-vous-succession-quiz';
        }

        // Initialisation des √©v√©nements
        document.addEventListener('DOMContentLoaded', () => {
            // Bouton de d√©marrage
            document.getElementById('startBtn').addEventListener('click', () => {
                currentQuestion = 1;
                updateProgress();
                showPage('question1');
            });

            // Gestion des options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const parent = this.closest('.options');
                    const questionNum = this.closest('.page').id.replace('question', '');
                    
                    // D√©s√©lectionner les autres
                    parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                    
                    // S√©lectionner l'actuel
                    this.classList.add('selected');
                    
                    // Sauvegarder la r√©ponse
                    answers[`q${questionNum}`] = this.dataset.value;
                    
                    // Activer le bouton suivant
                    const nextBtn = this.closest('.page').querySelector('.next-btn');
                    if (nextBtn) nextBtn.disabled = false;
                });
            });

            // Boutons "Suivant"
            document.querySelectorAll('.next-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const currentNum = parseInt(this.dataset.current);
                    if (currentNum < 7) {
                        currentQuestion = currentNum + 1;
                        updateProgress();
                        showPage(`question${currentQuestion}`);
                    } else {
                        showPage('contact');
                    }
                });
            });

            // Formulaire de contact
            document.getElementById('contactForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = document.getElementById('submitBtn');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Envoi en cours...';
                
                const fullName = document.getElementById('fullName').value;
                const phone = document.getElementById('phone').value;
                const address = document.getElementById('address').value;
                
                try {
                    const response = await fetch(BACKEND_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            json: {
                                fullName: fullName,
                                phone: phone,
                                address: address || null,
                                q1_sentiment: answers.q1 || null,
                                q2_heirs: answers.q2 || null,
                                q3_property_state: answers.q3 || null,
                                q4_family_discussion: answers.q4 || null,
                                q5_timeline: answers.q5 || null,
                                q6_obstacle: answers.q6 || null,
                                q7_consultation: answers.q7 || null
                            }
                        })
                    });
                    
                    const data = await response.json();
                    console.log('R√©ponse du serveur:', data);
                } catch (error) {
                    console.error('Erreur lors de l\'envoi:', error);
                }
                
                // Afficher les r√©sultats m√™me en cas d'erreur d'envoi
                const profile = calculateProfile();
                displayResults(profile);
                document.getElementById('progressFill').style.width = '100%';
                
                setTimeout(() => {
                    showPage('results');
                }, 500);
            });
        });
    </script>
</body>
</html>
